# Dashboard for wastewater R<sub>e</sub> estimation

Link to dashboard: [https://ibz-shiny.ethz.ch/wastewaterRe](https://ibz-shiny.ethz.ch/wastewaterRe)

An R Shiny dashboard to visualise R<sub>e</sub> estimates from wastewater from six different wastewater treatment plants in Switzerland. These estimates are shown together with the catchment specific cases, SARS-CoV-2 measurements in the wastewater, as well as R<sub>e</sub> estimated from other data sources (catchment and canton specific cases) along with their 95% confidence intervals. Catchment specific cases are included as the catchment area for a particular wastewater treatment plant differs from the cantonal area.

The six wastewater treatment plants we look at are: Zurich, Altenrhein, Chur, Laupen, Lugano and Lausanne. Currently, we have not included the Lausanne plant in the dashboard due to data quality issues.

The methods used to estimate the R<sub>e</sub> are described [here](https://www.medrxiv.org/content/10.1101/2021.04.29.21255961v1).

## To reproduce this Shiny App locally
(i) Run `Rww_estimation.R` (see below) locally, this will create two csv files (Rcc_cantonal.csv; Rww_cantonal.csv) with the R<sub>e</sub> estimates.
(ii) Run `server.R`, this will launch the Shiny App.

## R Scripts

Core scripts:  
* `server.R`: Links the user interface with the instructions required to build and run the app.
* `ui.R`: Defines the user interface for the dashboard.<br>

Helper scripts:
* `reading_in.R`: Reads in the raw wastewater and case data for the six catchment areas from the respective [EAWAG pages](https://sensors-eawag.ch/sars/overview.html). 
* `Rww_estimation.R`: Computes the R<sub>e</sub> for wastewater samples as well as catchment cases. It is run automatically using cron once a day (00:00 CEST). The script makes use of the wastewater R<sub>e</sub> pipeline available [here](https://github.com/JSHuisman/wastewaterRe). These estimates are then written to a csv which is used when the dashboard is launched.
* `plot_maker.R`: Reads in cantonal R<sub>e</sub> estimates and defines functions to plot cases, raw wastewater data and the estimated R<sub>e</sub>. It makes use of the Rcc_cantonal.csv and Rww_cantonal.csv files as generated by the `Rww_estimation.R` script.

